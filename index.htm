<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta name="author" content="Daniel Flöter" />
    <meta name="date" content="2012-05-06T15:51:00+01:00" />
    <meta name="ROBOTS" content="ALL" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>COSMO2 - demo-page</title>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
    <style type="text/css">
        html, body { background-image: url(bg.png); }
        #cosmo2 { left: 400px; top: 200px; position: relative; }
        .image { position: relative; width: 500px; height: 180px; }
        div.image img { position: absolute; }
        .image img.bg { border: 2px solid #e7f3da; }
    </style>
</head>
<body>
    <div id="cosmo2">
    </div>
    <script type="text/javascript">
        $(function () {

            //------------------------------------------------------ - - - - - - - - - -------//
            // settings
            var settings = {
                strImagePath: 'images',            
                nRadiusWidth: 300,
                nRadiusHeight: 60,
                bAheadIsDown: true,
                nRotateSpeed: 110
            };

            //------------------------------------------------------ - - - - - - - - - -------//
            // global variables
            var global = {
                varAktiv: null,
                nAlpha: 0,
                nSliceNo: 12
            };

            //------------------------------------------------------ - - - - - - - - - -------//
            // creat DOM for rotator (Document Object Model)
            for (var i = 1; i <= global.nSliceNo; i++) {
                $('<div/>', {
                    id: 'image' + i,
                    class: 'image',
                    style: 'position: absolute; left: 300px; top: 0px; z-index: 100;'
                }).appendTo('#cosmo2');

                $('<img/>', {
                    id: 'image' + i,
                    class: 'bg',
                    src: settings.strImagePath + '/Entwurf-innen_bg.png',
                    style: 'top: 0; left: 0; opacity: 0;'
                }).appendTo('#image' + i);

                $('<img/>', {
                    class: 'all',
                    src: settings.strImagePath + '/Entwurf-innen-' + i + '_all.png',
                    style: 'left: 0px;top: 0px; opacity: 0;',
                    alt: 'sample image'
                }).appendTo('#image' + i);

                $('<img/>', {
                    src: settings.strImagePath + '/Entwurf-innen-' + i + '.png',
                    style: 'top: 0; left: 0;'
                }).appendTo('#image' + i);
            }

            //------------------------------------------------------ - - - - - - - - - -------//
            // rotate translation
            global.varAktiv = window.setInterval(function () { rotate(0.05); }, 1);

            //------------------------------------------------------ - - - - - - - - - -------//
            // break, set new translation and direction with mouse interaction
            $('.image').mousemove(function (e) {
                var nRelMousePos = e.pageX - 400 - 250;
                window.clearInterval(global.varAktiv)
                global.varAktiv = window.setInterval(function () { rotate(nRelMousePos / 1000); }, 1);
            });

            //------------------------------------------------------ - - - - - - - - - -------//
            // set for each image-slide css properties, like: left, top, z-index, opacity, ...
            //------------------------------------------------------ - - - - - - - - - -------//
            function rotate(delta) {
                var nAlphaWithOffset;
                global.nAlpha += (delta * settings.nRotateSpeed / 1100);
                for (var i = 1; i <= global.nSliceNo; i++) {
                    nAlphaWithOffset = global.nAlpha + (0.5 * i);
                    $('#image' + i).css('left', Math.cos(nAlphaWithOffset) * settings.nRadiusWidth + 'px');
                    $('#image' + i).css('top', Math.sin(nAlphaWithOffset) * parseInt((settings.bAheadIsDown == true ? '+' : '-') + settings.nRadiusHeight) + 'px');
                    $('#image' + i).css('z-index', Math.floor((Math.sin(nAlphaWithOffset) * 100) + 100));
                    $('#image' + i + ' img.bg, #image' + i + ' img.all').css('opacity', Math.sin(nAlphaWithOffset) < 0.1 ? 0 : Math.sin(nAlphaWithOffset));
                    $('#image' + i + ' img.bg').css('border-style', Math.sin(nAlphaWithOffset) < 0.5 ? 'none' : 'solid');
                }
            };
        });
    </script>
</body>
</html>
